<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Krnl-style Landing (Demo)</title>

  <!-- Tailwind via CDN (for quick demo) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Small custom styles -->
  <style>
    :root{
      --bg1:#0b0710;
      --bg2:#11061b;
      --glass: rgba(255,255,255,0.04);
    }
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg,var(--bg1),var(--bg2));
      color:#fff;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
    }

    /* nav pill */
    .nav-pill{
      background:linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
      backdrop-filter: blur(6px);
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.06);
      padding:10px 14px;
      display:flex;
      align-items:center;
      gap:12px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.45);
    }

    /* neon glow around preview */
    .neon {
      box-shadow: 0 10px 40px rgba(128,60,231,0.12);
      border-radius: 16px;
      padding:6px;
      background: linear-gradient(90deg, rgba(128,60,231,0.08), rgba(90,40,160,0.04));
      border: 1px solid rgba(255,255,255,0.03);
    }

    /* card style */
    .glass-card{
      border-radius: 18px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.2));
      border: 1px solid rgba(255,255,255,0.04);
      padding:18px;
      backdrop-filter: blur(6px);
    }

    /* small stars under content for mobile bottom */
    footer .mini-star{opacity:0.06}

    /* make canvas fill full page behind content */
    #bg-canvas { position: fixed; inset:0; z-index:0; pointer-events:none; }
    #app { position:relative; z-index:10; }

    /* smooth anchor scroll and section spacing */
    html { scroll-behavior: smooth; }

    /* responsive tweaks */
    @media (max-width:640px){
      .nav-pill{ padding:10px; border-radius:12px; }
      .neon { padding:4px; border-radius:12px; }
    }
  </style>
</head>
<body>

  <!-- THREE.JS canvas -->
  <canvas id="bg-canvas"></canvas>

  <div id="app">
    <!-- Top navigation -->
    <header class="max-w-4xl mx-auto px-4 sm:px-6 py-6">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 rounded-md bg-white/8 flex items-center justify-center">
            <!-- simple K mark -->
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M6 18L14 6L18 10L10 22L6 18Z" fill="white" /></svg>
          </div>
          <div class="text-lg font-medium">Krnl</div>
        </div>

        <div class="nav-pill">
          <button id="downloadBtn" class="px-4 py-2 rounded-full bg-white text-black font-semibold shadow">‚¨á Download</button>
          <button class="h-10 w-10 rounded-md bg-white/6 flex items-center justify-center">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M4 6h16M4 12h16M4 18h16" stroke="white" stroke-opacity="0.85" stroke-width="1.4" stroke-linecap="round"/></svg>
          </button>
        </div>
      </div>
    </header>

    <!-- Hero -->
    <main class="max-w-3xl mx-auto px-4 text-center mt-4">
      <h1 class="text-4xl sm:text-5xl md:text-6xl font-extrabold leading-tight">Krnl's back,<br/> better than ever</h1>
      <p class="mt-4 text-lg text-white/70 max-w-2xl mx-auto">A powerful multi-platform Luau scripting engine, complete with a text editor and built-in script database.</p>

      <div class="mt-8 flex flex-col sm:flex-row gap-4 items-center justify-center">
        <button class="px-8 py-3 rounded-xl bg-white text-black font-semibold shadow-lg">Download</button>
        <button class="px-8 py-3 rounded-xl bg-transparent border border-white/10 text-white/90 font-medium backdrop-blur-sm">Join Discord</button>
      </div>

      <!-- preview neon card -->
      <div class="mt-10 relative">
        <div class="neon mx-auto max-w-3xl p-4">
          <div class="glass-card flex gap-4 items-stretch">
            <aside class="w-48 p-3 rounded-md bg-gradient-to-b from-[#0f0720] to-[#120824]">
              <div class="text-sm font-semibold text-white/90">Editor</div>
              <ul class="mt-3 text-sm text-white/60 space-y-2">
                <li class="bg-white/3 px-3 py-1 rounded">New tab</li>
                <li class="bg-white/3 px-3 py-1 rounded">Console</li>
                <li class="bg-white/3 px-3 py-1 rounded">Hooks</li>
              </ul>
            </aside>

            <div class="flex-1 bg-[#040306] rounded-md p-4">
              <pre class="h-36 bg-gradient-to-r from-[#0b1220] to-[#2a0233] rounded-md p-3 text-xs font-mono text-green-300 overflow-auto">
-- sample code
local function hello()
  print("hello world")
end
              </pre>
            </div>
          </div>
        </div>
        <!-- neon glow -->
        <div style="position:absolute;inset:-8px;border-radius:18px;pointer-events:none;box-shadow:0 0 40px 6px rgba(128,60,231,0.12)"></div>
      </div>
    </main>

    <!-- Platform cards -->
    <section class="max-w-4xl mx-auto px-4 mt-12 grid grid-cols-1 sm:grid-cols-3 gap-6 pb-10">
      <!-- Android -->
      <div class="glass-card">
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 rounded-lg bg-white/6 flex items-center justify-center">
            <svg width="22" height="22" viewBox="0 0 24 24"><circle cx="12" cy="12" r="9" stroke="#fff" stroke-opacity="0.06"/></svg>
          </div>
          <div>
            <div class="text-lg font-semibold">Android</div>
            <div class="text-sm text-white/60">All Android devices</div>
          </div>
        </div>
        <div class="mt-4 flex flex-col gap-3">
          <button class="w-full py-3 rounded-lg bg-white text-black font-semibold">‚¨á Download Regular</button>
          <button class="w-full py-3 rounded-lg bg-transparent border border-white/10 text-white/80">‚¨á Download VNG</button>
          <div class="mt-2 p-3 rounded-lg bg-yellow-900/20 text-yellow-300 text-sm">Only use VNG if you have a Vietnamese region locked account</div>
        </div>
      </div>

      <!-- iOS -->
      <div class="glass-card">
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 rounded-lg bg-white/6 flex items-center justify-center">üçé</div>
          <div>
            <div class="text-lg font-semibold">iOS</div>
            <div class="text-sm text-white/60">iPhone & iPad</div>
          </div>
        </div>
        <div class="mt-4 flex flex-col gap-3">
          <button class="w-full py-3 rounded-lg bg-white text-black font-semibold">‚¨á Download IPA</button>
          <button class="w-full py-3 rounded-lg bg-transparent border border-white/10 text-white/80">‚¨á Download VNG IPA</button>
          <button class="w-full py-3 rounded-lg bg-transparent border border-white/10 text-white/80">Direct Install</button>
        </div>
      </div>

      <!-- Windows -->
      <div class="glass-card">
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 rounded-lg bg-white/6 flex items-center justify-center">üñ•Ô∏è</div>
          <div>
            <div class="text-lg font-semibold">Windows</div>
            <div class="text-sm text-white/60">All Windows versions</div>
          </div>
        </div>
        <div class="mt-4 flex flex-col gap-3">
          <button class="w-full py-3 rounded-lg bg-slate-700/60 text-white/90 font-semibold">‚¨á Download New UI</button>
          <button class="w-full py-3 rounded-lg bg-transparent border border-white/10 text-white/80">‚¨á Download Legacy</button>
          <div class="mt-2 p-3 rounded-lg bg-blue-900/20 text-blue-300 text-sm">Coming soon! Windows support is currently in development</div>
        </div>
      </div>
    </section>

    <!-- Help section -->
    <section class="max-w-2xl mx-auto px-4 mt-8 mb-20">
      <div class="glass-card text-center py-10">
        <h3 class="text-2xl font-bold">Need help getting started?</h3>
        <p class="mt-3 text-white/70">Join our Discord community for support, updates, and to connect with other users.</p>
        <div class="mt-6">
          <button class="px-6 py-3 rounded-xl bg-transparent border border-white/10">Join Discord</button>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="mt-8 pb-20 text-center text-white/60">
      <div>¬© 2025 Krnl Inc.</div>
      <div class="mt-4 mini-star">background-demo ‚Ä¢ stars powered by Three.js</div>
    </footer>
  </div>

  <!-- Three.js (module) for starfield background -->
  <script type="module">
    import * as THREE from 'https://unpkg.com/three@0.152.2/build/three.module.js';

    // Setup renderer
    const canvas = document.getElementById('bg-canvas');
    const renderer = new THREE.WebGLRenderer({canvas, antialias:true, alpha:true});
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    renderer.setSize(window.innerWidth, window.innerHeight);

    // Scene & camera
    const scene = new THREE.Scene();
    scene.fog = new THREE.FogExp2(0x08060a, 0.0006);
    const camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 0.1, 2000);
    camera.position.z = 80;

    // Resize handler
    function onResize(){
      renderer.setSize(window.innerWidth, window.innerHeight);
      camera.aspect = window.innerWidth/window.innerHeight;
      camera.updateProjectionMatrix();
    }
    window.addEventListener('resize', onResize);

    // Create starfield (points)
    const starCount = 1600;
    const positions = new Float32Array(starCount * 3);
    const sizes = new Float32Array(starCount);
    for(let i=0;i<starCount;i++){
      const i3 = i*3;
      // distribute in a wide volume
      positions[i3] = (Math.random()-0.5) * 1200;
      positions[i3+1] = (Math.random()-0.5) * 800;
      positions[i3+2] = -Math.random() * 1200;
      sizes[i] = Math.random() * 1.5 + 0.3;
    }
    const geometry = new THREE.BufferGeometry();
    geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
    geometry.setAttribute('size', new THREE.BufferAttribute(sizes, 1));

    // custom shader material for subtle twinkle
    const material = new THREE.ShaderMaterial({
      transparent: true,
      depthWrite: false,
      uniforms: {
        time: { value: 0 },
        color: { value: new THREE.Color(0xffffff) },
      },
      vertexShader: `
        attribute float size;
        varying float vSize;
        void main(){
          vSize = size;
          vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
          gl_PointSize = size * (200.0 / -mvPosition.z);
          gl_Position = projectionMatrix * mvPosition;
        }
      `,
      fragmentShader: `
        uniform float time;
        uniform vec3 color;
        varying float vSize;
        void main(){
          float d = distance(gl_PointCoord, vec2(0.5));
          float alpha = smoothstep(0.5, 0.0, d);
          // subtle twinkle
          float tw = 0.6 + 0.4 * sin(time * 2.0 + vSize * 10.0);
          gl_FragColor = vec4(color * tw, alpha * 0.9);
        }
      `
    });

    const points = new THREE.Points(geometry, material);
    scene.add(points);

    // Add a large, soft glow plane behind content (for purple halo)
    const planeGeom = new THREE.PlaneGeometry(1200, 800);
    const planeMat = new THREE.MeshBasicMaterial({ color: 0x220033, transparent:true, opacity: 0.02 });
    const plane = new THREE.Mesh(planeGeom, planeMat);
    plane.position.z = -600;
    scene.add(plane);

    // subtle camera movement based on pointer for parallax
    let targetX = 0, targetY = 0;
    window.addEventListener('mousemove', (e) => {
      const nx = (e.clientX / window.innerWidth) - 0.5;
      const ny = (e.clientY / window.innerHeight) - 0.5;
      targetX = nx * 8;
      targetY = -ny * 6;
    });

    // animate
    const clock = new THREE.Clock();
    function animate(){
      requestAnimationFrame(animate);
      const t = clock.getElapsedTime();
      material.uniforms.time.value = t;

      // slowly translate stars forward to create depth-motion
      const pos = geometry.attributes.position.array;
      for(let i=2;i<pos.length;i+=3){
        pos[i] += 0.6 * (0.3 + Math.sin((i/3) * 0.001 + t*0.25) * 0.05);
        if(pos[i] > 10) pos[i] = -1200 * Math.random();
      }
      geometry.attributes.position.needsUpdate = true;

      // camera lerp to target
      camera.position.x += (targetX - camera.position.x) * 0.05;
      camera.position.y += (targetY - camera.position.y) * 0.05;

      // very slow rotation for interest
      points.rotation.y = Math.sin(t*0.05) * 0.02;

      renderer.render(scene, camera);
    }
    animate();

    // small optimization when page hidden
    document.addEventListener('visibilitychange', () => {
      if(document.hidden) renderer.setAnimationLoop(null);
      else animate();
    });

    // optional: pause animation on low-power devices (simple check)
    if(navigator.hardwareConcurrency && navigator.hardwareConcurrency < 3){
      // reduce star count visual (not creating dynamic here for simplicity) but reduce frame rate
      let last = 0;
      function throttledAnimate(){
        const now = performance.now();
        if(now - last > 50) { last = now; renderer.render(scene,camera); material.uniforms.time.value = clock.getElapsedTime(); }
        requestAnimationFrame(throttledAnimate);
      }
      throttledAnimate();
    }
  </script>

</body>
</html>
