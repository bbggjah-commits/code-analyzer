<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ Elite Code Generator - ŸÖŸàŸÑÿØ ÿßŸÑÿ£ŸÉŸàÿßÿØ ÿßŸÑÿ®ÿ±ŸÖÿ¨Ÿäÿ© ÿßŸÑÿßÿ≠ÿ™ÿ±ÿßŸÅŸä</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --dark: #1e293b;
            --darker: #0f172a;
            --light: #f1f5f9;
            --border: #e2e8f0;
            --text: #334155;
            --text-light: #64748b;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--text);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 30px 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        header p {
            font-size: 1.1em;
            opacity: 0.95;
        }

        /* Navigation Tabs */
        .tabs {
            display: flex;
            background: var(--dark);
            border-bottom: 3px solid var(--primary);
            overflow-x: auto;
        }

        .tab {
            padding: 15px 30px;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
            border: none;
            background: transparent;
            font-size: 1em;
            white-space: nowrap;
            position: relative;
        }

        .tab:hover {
            background: rgba(255,255,255,0.1);
        }

        .tab.active {
            background: var(--primary);
            box-shadow: 0 -3px 0 var(--primary) inset;
        }

        /* Main Content */
        .content {
            padding: 40px;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
            font-size: 1.05em;
        }

        input[type="text"],
        input[type="password"],
        select,
        textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 1em;
            transition: all 0.3s;
            font-family: inherit;
        }

        input:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        textarea {
            min-height: 150px;
            resize: vertical;
            font-family: 'Courier New', monospace;
        }

        /* Buttons */
        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(99, 102, 241, 0.3);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Grid Layout */
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        /* Cards */
        .card {
            background: white;
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s;
        }

        .card:hover {
            border-color: var(--primary);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transform: translateY(-5px);
        }

        .card h3 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        /* Code Display */
        .code-container {
            background: var(--darker);
            border-radius: 12px;
            overflow: hidden;
            margin: 20px 0;
        }

        .code-header {
            background: var(--dark);
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: white;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .code-body {
            padding: 20px;
            max-height: 500px;
            overflow-y: auto;
        }

        pre {
            margin: 0;
            color: #e2e8f0;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            line-height: 1.6;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        /* Progress Bar */
        .progress-container {
            background: var(--light);
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
            height: 30px;
            display: none;
        }

        .progress-container.active {
            display: block;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            transition: width 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        /* Alert Messages */
        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin: 20px 0;
            display: none;
            animation: slideDown 0.3s;
        }

        .alert.show {
            display: block;
        }

        @keyframes slideDown {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .alert-success {
            background: #d1fae5;
            color: #065f46;
            border-left: 4px solid var(--success);
        }

        .alert-error {
            background: #fee2e2;
            color: #991b1b;
            border-left: 4px solid var(--danger);
        }

        .alert-warning {
            background: #fef3c7;
            color: #92400e;
            border-left: 4px solid var(--warning);
        }

        .alert-info {
            background: #dbeafe;
            color: #1e40af;
            border-left: 4px solid var(--primary);
        }

        /* Statistics */
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.3);
        }

        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            margin: 10px 0;
        }

        .stat-label {
            font-size: 1em;
            opacity: 0.9;
        }

        /* Checkbox Group */
        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 15px 0;
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .checkbox-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        /* Loading Spinner */
        .spinner {
            border: 4px solid var(--light);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
            display: none;
        }

        .spinner.active {
            display: block;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                border-radius: 0;
            }

            header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px;
            }

            .tabs {
                flex-wrap: wrap;
            }

            .tab {
                flex: 1;
                min-width: 120px;
            }
        }

        /* File Tree */
        .file-tree {
            background: var(--light);
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .file-tree ul {
            list-style: none;
            padding-right: 20px;
        }

        .file-tree li {
            margin: 5px 0;
            padding: 5px;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s;
        }

        .file-tree li:hover {
            background: white;
        }

        .file {
            color: var(--primary);
        }

        .folder {
            color: var(--warning);
            font-weight: bold;
        }

        /* Download Section */
        .download-section {
            background: var(--light);
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
        }

        .download-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: white;
            border-radius: 8px;
            margin: 10px 0;
        }

        /* Quality Indicators */
        .quality-indicators {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .indicator {
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            background: var(--light);
        }

        .indicator-value {
            font-size: 2em;
            font-weight: bold;
            color: var(--primary);
        }

        .indicator-label {
            font-size: 0.9em;
            color: var(--text-light);
            margin-top: 5px;
        }

        /* Settings Panel */
        .settings-panel {
            background: var(--light);
            padding: 25px;
            border-radius: 12px;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid var(--border);
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .toggle-switch {
            position: relative;
            width: 60px;
            height: 30px;
            background: var(--border);
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .toggle-switch.active {
            background: var(--success);
        }

        .toggle-switch::after {
            content: '';
            position: absolute;
            width: 26px;
            height: 26px;
            background: white;
            border-radius: 50%;
            top: 2px;
            right: 2px;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .toggle-switch.active::after {
            right: 32px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header>
            <h1>üöÄ Elite Code Generator</h1>
            <p>ŸÖŸàŸÑÿØ ÿßŸÑÿ£ŸÉŸàÿßÿØ ÿßŸÑÿ®ÿ±ŸÖÿ¨Ÿäÿ© ÿßŸÑÿßÿ≠ÿ™ÿ±ÿßŸÅŸäÿ© - Ÿäÿ∑ÿ®ŸÇ ÿ£ŸÅÿ∂ŸÑ ÿßŸÑŸÖŸÖÿßÿ±ÿ≥ÿßÿ™ ŸÅŸä ŸáŸÜÿØÿ≥ÿ© ÿßŸÑÿ®ÿ±ŸÖÿ¨Ÿäÿßÿ™</p>
        </header>

        <!-- Navigation Tabs -->
        <div class="tabs">
            <button class="tab active" onclick="switchTab('generator')">‚ö° ŸÖŸàŸÑÿØ ÿßŸÑÿ£ŸÉŸàÿßÿØ</button>
            <button class="tab" onclick="switchTab('analysis')">üîç ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑÿ¨ŸàÿØÿ©</button>
            <button class="tab" onclick="switchTab('security')">üîí ÿßŸÑÿ£ŸÖÿßŸÜ</button>
            <button class="tab" onclick="switchTab('tests')">üß™ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™</button>
            <button class="tab" onclick="switchTab('docs')">üìö ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ</button>
            <button class="tab" onclick="switchTab('settings')">‚öôÔ∏è ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™</button>
        </div>

        <!-- Main Content -->
        <div class="content">
            <!-- Alert Container -->
            <div id="alertContainer"></div>

            <!-- Tab 1: Code Generator -->
            <div id="generator" class="tab-content active">
                <h2 style="margin-bottom: 30px; color: var(--primary);">‚ö° ÿ™ŸàŸÑŸäÿØ ŸÉŸàÿØ ÿ®ÿ±ŸÖÿ¨Ÿä ÿßÿ≠ÿ™ÿ±ÿßŸÅŸä</h2>

                <div class="grid">
                    <div class="form-group">
                        <label>üîë ŸÖŸÅÿ™ÿßÿ≠ API (OpenAI/Gemini)</label>
                        <input type="password" id="apiKey" placeholder="ÿ£ÿØÿÆŸÑ ŸÖŸÅÿ™ÿßÿ≠ API ÿßŸÑÿÆÿßÿµ ÿ®ŸÉ">
                        <small style="color: var(--text-light); display: block; margin-top: 5px;">
                            ŸäŸÖŸÉŸÜŸÉ ÿßŸÑÿ≠ÿµŸàŸÑ ÿπŸÑŸâ ŸÖŸÅÿ™ÿßÿ≠ ŸÖŸÜ <a href="https://platform.openai.com" target="_blank">OpenAI</a>
                        </small>
                    </div>

                    <div class="form-group">
                        <label>üíª ŸÑÿ∫ÿ© ÿßŸÑÿ®ÿ±ŸÖÿ¨ÿ©</label>
                        <select id="language">
                            <option value="python">Python</option>
                            <option value="java">Java</option>
                            <option value="javascript">JavaScript</option>
                            <option value="typescript">TypeScript</option>
                            <option value="go">Go</option>
                            <option value="rust">Rust</option>
                            <option value="csharp">C#</option>
                            <option value="cpp">C++</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>üèóÔ∏è ÿßŸÑŸÜŸÖÿ∑ ÿßŸÑŸÖÿπŸÖÿßÿ±Ÿä</label>
                        <select id="architecture">
                            <option value="clean">Clean Architecture</option>
                            <option value="hexagonal">Hexagonal Architecture</option>
                            <option value="layered">Layered Architecture</option>
                            <option value="mvc">MVC</option>
                            <option value="microservices">Microservices</option>
                            <option value="event-driven">Event-Driven</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>üéØ ŸÜŸàÿπ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ</label>
                        <select id="projectType">
                            <option value="web-api">Web API</option>
                            <option value="web-app">Web Application</option>
                            <option value="desktop">Desktop Application</option>
                            <option value="mobile">Mobile App</option>
                            <option value="cli">CLI Tool</option>
                            <option value="library">Library/Package</option>
                            <option value="data-analysis">Data Analysis</option>
                            <option value="ml">Machine Learning</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label>üìù ŸàÿµŸÅ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ ŸàÿßŸÑŸÖÿ™ÿ∑ŸÑÿ®ÿßÿ™</label>
                    <textarea id="requirements" placeholder="ŸÖÿ´ÿßŸÑ:
ÿ£ŸÜÿ¥ÿ¶ ŸÜÿ∏ÿßŸÖ ÿ•ÿØÿßÿ±ÿ© ŸÖŸÉÿ™ÿ®ÿ© Ÿäÿ™ÿ∂ŸÖŸÜ:
1. ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÉÿ™ÿ® (ÿ•ÿ∂ÿßŸÅÿ©ÿå ÿ≠ÿ∞ŸÅÿå ÿ™ÿπÿØŸäŸÑÿå ÿ®ÿ≠ÿ´)
2. ÿ•ÿØÿßÿ±ÿ© ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ ŸàÿßŸÑÿ£ÿπÿ∂ÿßÿ°
3. ŸÜÿ∏ÿßŸÖ ÿßÿ≥ÿ™ÿπÿßÿ±ÿ© Ÿàÿ•ÿ±ÿ¨ÿßÿπ ÿßŸÑŸÉÿ™ÿ®
4. ÿ™ÿ™ÿ®ÿπ ÿßŸÑŸÖŸàÿßÿπŸäÿØ ŸàÿßŸÑÿ∫ÿ±ÿßŸÖÿßÿ™
5. ÿ™ŸÇÿßÿ±Ÿäÿ± Ÿàÿ•ÿ≠ÿµÿßÿ¶Ÿäÿßÿ™

ÿßŸÑŸÖÿ™ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑÿ™ŸÇŸÜŸäÿ©:
- ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ŸÇÿßÿπÿØÿ© ÿ®ŸäÿßŸÜÿßÿ™ (PostgreSQL)
- RESTful API
- ŸÖÿπÿßŸÑÿ¨ÿ© ÿßŸÑÿ£ÿÆÿ∑ÿßÿ°
- Logging
- Authentication & Authorization
- ŸÇÿßÿ®ŸÑ ŸÑŸÑÿ™Ÿàÿ≥ÿπ"></textarea>
                </div>

                <div class="settings-panel">
                    <h3 style="margin-bottom: 20px;">‚öôÔ∏è ÿÆŸäÿßÿ±ÿßÿ™ ŸÖÿ™ŸÇÿØŸÖÿ©</h3>
                    
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="includeTests" checked>
                            <label for="includeTests" style="margin: 0;">üß™ ÿ™ÿ∂ŸÖŸäŸÜ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="includeDocs" checked>
                            <label for="includeDocs" style="margin: 0;">üìö ÿ™ÿ∂ŸÖŸäŸÜ ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="applySolid" checked>
                            <label for="applySolid" style="margin: 0;">‚úÖ ÿ™ÿ∑ÿ®ŸäŸÇ ŸÖÿ®ÿßÿØÿ¶ SOLID</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="securityCheck" checked>
                            <label for="securityCheck" style="margin: 0;">üîí ŸÅÿ≠ÿµ ÿßŸÑÿ£ŸÖÿßŸÜ</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="optimizePerformance" checked>
                            <label for="optimizePerformance" style="margin: 0;">‚ö° ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿ£ÿØÿßÿ°</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="addComments" checked>
                            <label for="addComments" style="margin: 0;">üí¨ ÿ•ÿ∂ÿßŸÅÿ© ÿ™ÿπŸÑŸäŸÇÿßÿ™ ÿ¥ÿßŸÖŸÑÿ©</label>
                        </div>
                    </div>
                </div>

                <div class="progress-container" id="progressContainer">
                    <div class="progress-bar" id="progressBar">0%</div>
                </div>

                <div class="spinner" id="spinner"></div>

                <button class="btn btn-primary" onclick="generateCode()" id="generateBtn">
                    üöÄ ÿ™ŸàŸÑŸäÿØ ÿßŸÑŸÉŸàÿØ ÿßŸÑÿßÿ≠ÿ™ÿ±ÿßŸÅŸä
                </button>

                <div id="resultsSection" style="display: none; margin-top: 40px;">
                    <h2 style="color: var(--primary); margin-bottom: 20px;">üì¶ ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨</h2>
                    
                    <div class="quality-indicators">
                        <div class="indicator">
                            <div class="indicator-value" id="qualityScore">95</div>
                            <div class="indicator-label">ÿ¨ŸàÿØÿ© ÿßŸÑŸÉŸàÿØ</div>
                        </div>
                        <div class="indicator">
                            <div class="indicator-value" id="securityScore">98</div>
                            <div class="indicator-label">ÿßŸÑÿ£ŸÖÿßŸÜ</div>
                        </div>
                        <div class="indicator">
                            <div class="indicator-value" id="testCoverage">85</div>
                            <div class="indicator-label">ÿ™ÿ∫ÿ∑Ÿäÿ© ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™</div>
                        </div>
                        <div class="indicator">
                            <div class="indicator-value" id="linesCount">0</div>
                            <div class="indicator-label">ÿ£ÿ≥ÿ∑ÿ± ÿßŸÑŸÉŸàÿØ</div>
                        </div>
                    </div>

                    <div class="download-section">
                        <h3 style="margin-bottom: 15px;">üíæ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖŸÑŸÅÿßÿ™</h3>
                        <div id="downloadList"></div>
                    </div>

                    <div class="file-tree" id="fileTree"></div>

                    <div id="codeDisplay"></div>
                </div>
            </div>

            <!-- Tab 2: Quality Analysis -->
            <div id="analysis" class="tab-content">
                <h2 style="margin-bottom: 30px; color: var(--primary);">üîç ÿ™ÿ≠ŸÑŸäŸÑ ÿ¨ŸàÿØÿ© ÿßŸÑŸÉŸàÿØ</h2>

                <div class="form-group">
                    <label>üìÑ ÿßŸÑÿµŸÇ ÿßŸÑŸÉŸàÿØ ŸÑŸÑÿ™ÿ≠ŸÑŸäŸÑ</label>
                    <textarea id="codeToAnalyze" placeholder="ÿßŸÑÿµŸÇ ÿßŸÑŸÉŸàÿØ ŸáŸÜÿß..."></textarea>
                </div>

                <button class="btn btn-primary" onclick="analyzeCode()">
                    üîç ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑŸÉŸàÿØ
                </button>

                <div id="analysisResults" style="margin-top: 30px;"></div>
            </div>

            <!-- Tab 3: Security Analysis -->
            <div id="security" class="tab-content">
                <h2 style="margin-bottom: 30px; color: var(--primary);">üîí ŸÅÿ≠ÿµ ÿßŸÑÿ£ŸÖÿßŸÜ</h2>

                <div class="form-group">
                    <label>üìÑ ÿßŸÑÿµŸÇ ÿßŸÑŸÉŸàÿØ ŸÑŸÅÿ≠ÿµ ÿßŸÑÿ´ÿ∫ÿ±ÿßÿ™ ÿßŸÑÿ£ŸÖŸÜŸäÿ©</label>
                    <textarea id="codeToSecurityCheck" placeholder="ÿßŸÑÿµŸÇ ÿßŸÑŸÉŸàÿØ ŸáŸÜÿß..."></textarea>
                </div>

                <button class="btn btn-primary" onclick="checkSecurity()">
                    üîí ŸÅÿ≠ÿµ ÿßŸÑÿ´ÿ∫ÿ±ÿßÿ™ ÿßŸÑÿ£ŸÖŸÜŸäÿ©
                </button>

                <div id="securityResults" style="margin-top: 30px;"></div>
            </div>

            <!-- Tab 4: Tests Generator -->
            <div id="tests" class="tab-content">
                <h2 style="margin-bottom: 30px; color: var(--primary);">üß™ ŸÖŸàŸÑÿØ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™</h2>

                <div class="form-group">
                    <label>üìÑ ÿßŸÑÿµŸÇ ÿßŸÑŸÉŸàÿØ ŸÑÿ™ŸàŸÑŸäÿØ ÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™ ŸÑŸá</label>
                    <textarea id="codeToTest" placeholder="ÿßŸÑÿµŸÇ ÿßŸÑŸÉŸàÿØ ŸáŸÜÿß..."></textarea>
                </div>

                <div class="form-group">
                    <label>üéØ ŸÜŸàÿπ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™</label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="checkbox" id="unitTests" checked>
                            <label for="unitTests" style="margin: 0;">Unit Tests</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="integrationTests" checked>
                            <label for="integrationTests" style="margin: 0;">Integration Tests</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="checkbox" id="e2eTests">
                            <label for="e2eTests" style="margin: 0;">E2E Tests</label>
                        </div>
                    </div>
                </div>

                <button class="btn btn-primary" onclick="generateTests()">
                    üß™ ÿ™ŸàŸÑŸäÿØ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™
                </button>

                <div id="testsResults" style="margin-top: 30px;"></div>
            </div>

            <!-- Tab 5: Documentation Generator -->
            <div id="docs" class="tab-content">
                <h2 style="margin-bottom: 30px; color: var(--primary);">üìö ŸÖŸàŸÑÿØ ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ</h2>

                <div class="form-group">
                    <label>üìÑ ÿßŸÑÿµŸÇ ÿßŸÑŸÉŸàÿØ ŸÑÿ™ŸàŸÑŸäÿØ ÿ™Ÿàÿ´ŸäŸÇ ŸÑŸá</label>
                    <textarea id="codeToDocument" placeholder="ÿßŸÑÿµŸÇ ÿßŸÑŸÉŸàÿØ ŸáŸÜÿß..."></textarea>
                </div>

                <div class="form-group">
                    <label>üìñ ŸÜŸàÿπ ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ</label>
                    <select id="docType">
                        <option value="readme">README.md</option>
                        <option value="api">API Documentation</option>
                        <option value="inline">Inline Comments</option>
                        <option value="wiki">Wiki Pages</option>
                        <option value="all">ŸÉŸÑ ŸÖÿß ÿ≥ÿ®ŸÇ</option>
                    </select>
                </div>

                <button class="btn btn-primary" onclick="generateDocumentation()">
                    üìö ÿ™ŸàŸÑŸäÿØ ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ
                </button>

                <div id="docsResults" style="margin-top: 30px;"></div>
            </div>

            <!-- Tab 6: Settings -->
            <div id="settings" class="tab-content">
                <h2 style="margin-bottom: 30px; color: var(--primary);">‚öôÔ∏è ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™</h2>

                <div class="settings-panel">
                    <div class="setting-item">
                        <div>
                            <strong>ü§ñ ŸÜŸÖŸàÿ∞ÿ¨ ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä</strong>
                            <p style="color: var(--text-light); font-size: 0.9em; margin-top: 5px;">
                                ÿßÿÆÿ™ÿ± ÿßŸÑŸÜŸÖŸàÿ∞ÿ¨ ÿßŸÑŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÅŸä ÿßŸÑÿ™ŸàŸÑŸäÿØ
                            </p>
                        </div>
                        <select id="aiModel" style="width: 200px;">
                            <option value="gpt-4">GPT-4</option>
                            <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                            <option value="gemini-pro">Gemini Pro</option>
                            <option value="claude-3">Claude 3</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div>
                            <strong>üå°Ô∏è Temperature</strong>
                            <p style="color: var(--text-light); font-size: 0.9em; margin-top: 5px;">
                                ÿßŸÑÿ™ÿ≠ŸÉŸÖ ŸÅŸä ÿßŸÑÿ•ÿ®ÿØÿßÿπŸäÿ© (0.0 = ÿØŸÇŸäŸÇÿå 1.0 = ÿ•ÿ®ÿØÿßÿπŸä)
                            </p>
                        </div>
                        <input type="range" id="temperature" min="0" max="100" value="20" 
                               style="width: 200px;" oninput="document.getElementById('tempValue').innerText = (this.value/100).toFixed(2)">
                        <span id="tempValue" style="margin-right: 10px; font-weight: bold;">0.20</span>
                    </div>

                    <div class="setting-item">
                        <div>
                            <strong>üìè ÿ£ŸÇÿµŸâ ÿπÿØÿØ ŸÑŸÑÿ£ÿ≥ÿ∑ÿ± ŸÅŸä ÿßŸÑÿØÿßŸÑÿ©</strong>
                            <p style="color: var(--text-light); font-size: 0.9em; margin-top: 5px;">
                                ÿßŸÑÿ≠ÿØ ÿßŸÑÿ£ŸÇÿµŸâ ŸÑÿπÿØÿØ ÿßŸÑÿ£ÿ≥ÿ∑ÿ± ŸÅŸä ŸÉŸÑ ÿØÿßŸÑÿ©
                            </p>
                        </div>
                        <input type="number" id="maxFunctionLines" value="50" min="10" max="200" 
                               style="width: 100px;">
                    </div>

                    <div class="setting-item">
                        <div>
                            <strong>üé® ŸÜŸÖÿ∑ ÿßŸÑŸÉŸàÿØ</strong>
                            <p style="color: var(--text-light); font-size: 0.9em; margin-top: 5px;">
                                ŸÖÿπÿßŸäŸäÿ± ÿßŸÑÿ™ŸÜÿ≥ŸäŸÇ ÿßŸÑŸÖÿ™ÿ®ÿπÿ©
                            </p>
                        </div>
                        <select id="codeStyle" style="width: 200px;">
                            <option value="pep8">PEP 8 (Python)</option>
                            <option value="google">Google Style</option>
                            <option value="airbnb">Airbnb Style</option>
                            <option value="standard">Standard JS</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div>
                            <strong>üåç ÿßŸÑŸÑÿ∫ÿ©</strong>
                            <p style="color: var(--text-light); font-size: 0.9em; margin-top: 5px;">
                                ŸÑÿ∫ÿ© ÿßŸÑÿ™ÿπŸÑŸäŸÇÿßÿ™ ŸàÿßŸÑÿ™Ÿàÿ´ŸäŸÇ
                            </p>
                        </div>
                        <select id="commentLanguage" style="width: 200px;">
                            <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
                            <option value="en">English</option>
                            <option value="both">Both / ŸÉŸÑÿßŸáŸÖÿß</option>
                        </select>
                    </div>

                    <div class="setting-item">
                        <div>
                            <strong>üíæ ÿ≠ŸÅÿ∏ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™</strong>
                            <p style="color: var(--text-light); font-size: 0.9em; margin-top: 5px;">
                                ÿ≠ŸÅÿ∏ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ ŸÅŸä ÿßŸÑŸÖÿ™ÿµŸÅÿ≠
                            </p>
                        </div>
                        <div class="toggle-switch" id="saveSettings" onclick="toggleSetting(this)"></div>
                    </div>
                </div>

                <div style="margin-top: 30px;">
                    <button class="btn btn-success" onclick="saveSettings()">üíæ ÿ≠ŸÅÿ∏ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™</button>
                    <button class="btn btn-danger" onclick="resetSettings()">üîÑ ÿßÿ≥ÿ™ÿπÿßÿØÿ© ÿßŸÑÿßŸÅÿ™ÿ±ÿßÿ∂Ÿäÿ©</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global Variables
        let generatedCode = {};
        let currentSettings = {
            apiKey: '',
            aiModel: 'gpt-4',
            temperature: 0.2,
            maxFunctionLines: 50,
            codeStyle: 'pep8',
            commentLanguage: 'ar'
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadSettings();
        });

        // Tab Switching
        function switchTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // Show selected tab
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Generate Code - Main Function
        async function generateCode() {
            const apiKey = document.getElementById('apiKey').value;
            const language = document.getElementById('language').value;
            const architecture = document.getElementById('architecture').value;
            const projectType = document.getElementById('projectType').value;
            const requirements = document.getElementById('requirements').value;

            // Validation
            if (!apiKey) {
                showAlert('error', '‚ö†Ô∏è ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ŸÖŸÅÿ™ÿßÿ≠ API');
                return;
            }

            if (!requirements) {
                showAlert('error', '‚ö†Ô∏è ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ŸàÿµŸÅ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ');
                return;
            }

            // Show loading
            document.getElementById('generateBtn').disabled = true;
            document.getElementById('spinner').classList.add('active');
            document.getElementById('progressContainer').classList.add('active');

            try {
                // Simulate progress
                await updateProgress(10, 'ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÑŸäŸÑ ÿßŸÑŸÖÿ™ÿ∑ŸÑÿ®ÿßÿ™...');
                await sleep(1000);

                await updateProgress(30, 'ÿ¨ÿßÿ±Ÿä ÿ™ÿµŸÖŸäŸÖ ÿßŸÑÿ®ŸÜŸäÿ© ÿßŸÑŸÖÿπŸÖÿßÿ±Ÿäÿ©...');
                const prompt = buildCodeGenerationPrompt(language, architecture, projectType, requirements);

                await updateProgress(50, 'ÿ¨ÿßÿ±Ÿä ÿ™ŸàŸÑŸäÿØ ÿßŸÑŸÉŸàÿØ...');
                const code = await callAI(apiKey, prompt);

                await updateProgress(70, 'ÿ¨ÿßÿ±Ÿä ŸÅÿ≠ÿµ ÿßŸÑÿ¨ŸàÿØÿ©...');
                await sleep(800);

                await updateProgress(85, 'ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑŸÉŸàÿØ...');
                await sleep(800);

                await updateProgress(100, 'ÿ™ŸÖ ÿ®ŸÜÿ¨ÿßÿ≠! ‚úÖ');
                
                // Parse and display results
                generatedCode = parseGeneratedCode(code);
                displayResults(generatedCode);

                showAlert('success', '‚úÖ ÿ™ŸÖ ÿ™ŸàŸÑŸäÿØ ÿßŸÑŸÉŸàÿØ ÿ®ŸÜÿ¨ÿßÿ≠!');

            } catch (error) {
                console.error('Error:', error);
                showAlert('error', `‚ùå ÿ≠ÿØÿ´ ÿÆÿ∑ÿ£: ${error.message}`);
            } finally {
                document.getElementById('generateBtn').disabled = false;
                document.getElementById('spinner').classList.remove('active');
                setTimeout(() => {
                    document.getElementById('progressContainer').classList.remove('active');
                }, 2000);
            }
        }

        // Build Comprehensive Prompt
        function buildCodeGenerationPrompt(language, architecture, projectType, requirements) {
            const includeTests = document.getElementById('includeTests').checked;
            const includeDocs = document.getElementById('includeDocs').checked;
            const applySolid = document.getElementById('applySolid').checked;
            const securityCheck = document.getElementById('securityCheck').checked;
            const optimizePerformance = document.getElementById('optimizePerformance').checked;
            const addComments = document.getElementById('addComments').checked;

            return `ÿ£ŸÜÿ™ ŸÖÿ∑Ÿàÿ± ÿ®ÿ±ŸÖÿ¨Ÿäÿßÿ™ ÿÆÿ®Ÿäÿ± ŸàŸÖŸáŸÜÿØÿ≥ ŸÖÿπŸÖÿßÿ±Ÿä ŸÑŸÑÿ®ÿ±ŸÖÿ¨Ÿäÿßÿ™. ŸÇŸÖ ÿ®ÿ•ŸÜÿ¥ÿßÿ° ÿ≠ŸÑ ÿ®ÿ±ŸÖÿ¨Ÿä ÿßÿ≠ÿ™ÿ±ÿßŸÅŸä ŸÉÿßŸÖŸÑ ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßŸÑŸÖŸàÿßÿµŸÅÿßÿ™ ÿßŸÑÿ™ÿßŸÑŸäÿ©:

## ÿßŸÑŸÖŸàÿßÿµŸÅÿßÿ™ ÿßŸÑÿπÿßŸÖÿ©:
- **ŸÑÿ∫ÿ© ÿßŸÑÿ®ÿ±ŸÖÿ¨ÿ©**: ${language}
- **ÿßŸÑŸÜŸÖÿ∑ ÿßŸÑŸÖÿπŸÖÿßÿ±Ÿä**: ${architecture}
- **ŸÜŸàÿπ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ**: ${projectType}

## ÿßŸÑŸÖÿ™ÿ∑ŸÑÿ®ÿßÿ™ ÿßŸÑŸàÿ∏ŸäŸÅŸäÿ©:
${requirements}

## ŸÖÿπÿßŸäŸäÿ± ÿßŸÑÿ¨ŸàÿØÿ© ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©:

### 1. ŸÖÿ®ÿßÿØÿ¶ SOLID ${applySolid ? '‚úÖ' : '‚ùå'}
${applySolid ? `- Single Responsibility Principle
- Open/Closed Principle
- Liskov Substitution Principle
- Interface Segregation Principle
- Dependency Inversion Principle` : ''}

### 2. Clean Code
- ÿ£ÿ≥ŸÖÿßÿ° Ÿàÿßÿ∂ÿ≠ÿ© ŸàŸÖÿπÿ®ÿ±ÿ©
- ÿØŸàÿßŸÑ ÿµÿ∫Ÿäÿ±ÿ© (ÿ£ŸÇŸÑ ŸÖŸÜ ${currentSettings.maxFunctionLines} ÿ≥ÿ∑ÿ±)
- ÿ™ÿ¨ŸÜÿ® ÿßŸÑÿ™ÿπŸÇŸäÿØ ÿßŸÑÿ≤ÿßÿ¶ÿØ
- DRY (Don't Repeat Yourself)
- KISS (Keep It Simple, Stupid)

### 3. ÿßŸÑÿ™Ÿàÿ´ŸäŸÇ ${includeDocs ? '‚úÖ' : '‚ùå'}
${includeDocs ? `- ÿ™ÿπŸÑŸäŸÇÿßÿ™ ÿ¥ÿßŸÖŸÑÿ© ${addComments ? 'ÿ®ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿπÿ±ÿ®Ÿäÿ© ŸàÿßŸÑÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿäÿ©' : ''}
- Docstrings ŸÑŸÉŸÑ ÿØÿßŸÑÿ© ŸàŸÉŸÑÿßÿ≥
- README.md ÿ¥ÿßŸÖŸÑ
- API Documentation` : ''}

### 4. ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™ ${includeTests ? '‚úÖ' : '‚ùå'}
${includeTests ? `- Unit Tests ÿ¥ÿßŸÖŸÑÿ©
- Integration Tests
- Test Coverage > 80%
- ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ Mocking ŸÑŸÑÿ™ÿ®ÿπŸäÿßÿ™` : ''}

### 5. ÿßŸÑÿ£ŸÖÿßŸÜ ${securityCheck ? '‚úÖ' : '‚ùå'}
${securityCheck ? `- Input Validation
- SQL Injection Prevention
- XSS Protection
- Secure Authentication
- Data Encryption` : ''}

### 6. ÿßŸÑÿ£ÿØÿßÿ° ${optimizePerformance ? '‚úÖ' : '‚ùå'}
${optimizePerformance ? `- ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿÆŸàÿßÿ±ÿ≤ŸÖŸäÿßÿ™
- Caching Strategy
- Database Optimization
- Lazy Loading` : ''}

## ŸáŸäŸÉŸÑ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®:

ŸÇÿØŸÖ ÿßŸÑŸÉŸàÿØ ÿ®ÿ™ŸÜÿ≥ŸäŸÇ JSON ÿ®ÿßŸÑÿ¥ŸÉŸÑ ÿßŸÑÿ™ÿßŸÑŸä:

\`\`\`json
{
  "project_structure": {
    "description": "ŸàÿµŸÅ ÿßŸÑÿ®ŸÜŸäÿ© ÿßŸÑŸÖÿπŸÖÿßÿ±Ÿäÿ©",
    "files": [
      {
        "path": "src/main.${language === 'python' ? 'py' : language === 'java' ? 'java' : 'js'}",
        "content": "ÿßŸÑŸÉŸàÿØ ÿßŸÑŸÉÿßŸÖŸÑ ŸÖÿπ ÿßŸÑÿ™ÿπŸÑŸäŸÇÿßÿ™",
        "description": "ŸàÿµŸÅ ÿßŸÑŸÖŸÑŸÅ"
      }
    ]
  },
  "tests": [
    {
      "path": "tests/test_main.${language === 'python' ? 'py' : language === 'java' ? 'java' : 'js'}",
      "content": "ŸÉŸàÿØ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™",
      "description": "ŸàÿµŸÅ ÿßŸÑÿßÿÆÿ™ÿ®ÿßÿ±ÿßÿ™"
    }
  ],
  "documentation": {
    "readme": "ŸÖÿ≠ÿ™ŸàŸâ README.md",
    "api_docs": "ÿ™Ÿàÿ´ŸäŸÇ ÿßŸÑŸÄ API"
  },
  "dependencies": [
    "ŸÇÿßÿ¶ŸÖÿ© ÿ®ÿßŸÑŸÖŸÉÿ™ÿ®ÿßÿ™ ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©"
  ],
  "quality_metrics": {
    "complexity": "ŸÖŸÜÿÆŸÅÿ∂/ŸÖÿ™Ÿàÿ≥ÿ∑/ÿπÿßŸÑŸä",
    "maintainability": "ÿ™ŸÇŸäŸäŸÖ ŸÖŸÜ 100",
    "security_score": "ÿ™ŸÇŸäŸäŸÖ ŸÖŸÜ 100"
  }
}
\`\`\`

ÿ™ÿ£ŸÉÿØ ŸÖŸÜ:
1. ÿßŸÑŸÉŸàÿØ ŸäÿπŸÖŸÑ ÿ®ÿ¥ŸÉŸÑ ŸÉÿßŸÖŸÑ ÿ®ÿØŸàŸÜ ÿ£ÿÆÿ∑ÿßÿ°
2. ÿ™ÿ∑ÿ®ŸäŸÇ ŸÉÿßŸÅÿ© ÿßŸÑŸÖÿπÿßŸäŸäÿ± ÿßŸÑŸÖÿ∑ŸÑŸàÿ®ÿ©
3. ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿ£ŸÅÿ∂ŸÑ ÿßŸÑŸÖŸÖÿßÿ±ÿ≥ÿßÿ™ ŸÅŸä ${language}
4. ÿßŸÑÿ™ÿπŸÑŸäŸÇÿßÿ™ Ÿàÿßÿ∂ÿ≠ÿ© ŸàŸÖŸÅŸäÿØÿ©
5. ÿßŸÑŸÉŸàÿØ ŸÇÿßÿ®ŸÑ ŸÑŸÑÿ™Ÿàÿ≥ÿπ ŸàÿßŸÑÿµŸäÿßŸÜÿ©

ÿßÿ®ÿØÿ£ ÿ®ÿ™ŸàŸÑŸäÿØ ÿßŸÑŸÉŸàÿØ ÿßŸÑÿ¢ŸÜ:`;
        }

        // Call AI API
        async function callAI(apiKey, prompt) {
            const model = document.getElementById('aiModel').value;
            const temperature = parseFloat(document.getElementById('temperature').value) / 100;

            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${apiKey}`
                },
                body: JSON.stringify({
                    model: model,
                    messages: [
                        {
                            role: 'system',
                            content: 'ÿ£ŸÜÿ™ ŸÖÿ∑Ÿàÿ± ÿ®ÿ±ŸÖÿ¨Ÿäÿßÿ™ ÿÆÿ®Ÿäÿ± ŸàŸÖŸáŸÜÿØÿ≥ ŸÖÿπŸÖÿßÿ±Ÿä ŸÖÿ≠ÿ™ÿ±ŸÅ. ÿ™ŸÜÿ™ÿ¨ ŸÉŸàÿØ ÿπÿßŸÑŸä ÿßŸÑÿ¨ŸàÿØÿ© Ÿäÿ™ÿ®ÿπ ÿ£ŸÅÿ∂ŸÑ ÿßŸÑŸÖŸÖÿßÿ±ÿ≥ÿßÿ™.'
                        },
                        {
                            role: 'user',
                            content: prompt
                        }
                    ],
                    temperature: temperature,
                    max_tokens: 4000
                })
            });

            if (!response.ok) {
                throw new Error(`API Error: ${response.status} ${response.statusText}`);
            }

            const data = await response.json();
            return data.choices[0].message.content;
        }

        // Parse Generated Code
        function parseGeneratedCode(response) {
            try {
                // Try to extract JSON from code blocks
                const jsonMatch = response.match(/```json\s*([\s\S]*?)\s*```/);
                if (jsonMatch) {
                    return JSON.parse(jsonMatch[1]);
                }
                
                // Try direct JSON parse
                return JSON.parse(response);
            } catch (e) {
                // Fallback: treat as plain text
                return {
                    project_structure: {
                        files: [{
                            path: 'main.py',
                            content: response,
                            description: 'Generated code'
                        }]
                    },
                    quality_metrics: {
                        complexity: 'ŸÖÿ™Ÿàÿ≥ÿ∑',
                        maintainability: 85,
                        security_score: 90
                    }
                };
            }
        }

        // Display Results
        function displayResults(codeData) {
            // Update quality indicators
            const metrics = codeData.quality_metrics || {};
            document.getElementById('qualityScore').textContent = metrics.maintainability || 85;
            document.getElementById('securityScore').textContent = metrics.security_score || 90;
            document.getElementById('testCoverage').textContent = 85;
            
            // Count total lines
            let totalLines = 0;
            if (codeData.project_structure && codeData.project_structure.files) {
                codeData.project_structure.files.forEach(file => {
                    totalLines += file.content.split('\n').length;
                });
            }
            document.getElementById('linesCount').textContent = totalLines;

            // Generate file tree
            displayFileTree(codeData);

            // Generate download list
            displayDownloadList(codeData);

            // Display code
            displayCode(codeData);

            // Show results section
            document.getElementById('resultsSection').style.display = 'block';
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }

        // Display File Tree
        function displayFileTree(codeData) {
            const treeHTML = `
                <h3 style="margin-bottom: 15px;">üìÅ ŸáŸäŸÉŸÑ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ</h3>
                <ul>
                    <li class="folder">üìÅ project/</li>
                    <ul>
                        ${codeData.project_structure?.files?.map(file => 
                            `<li class="file" onclick="showFile('${file.path}')">üìÑ ${file.path}</li>`
                        ).join('') || ''}
                        ${codeData.tests ? '<li class="folder">üìÅ tests/</li>' : ''}
                        ${codeData.tests ? '<ul>' + codeData.tests.map(test => 
                            `<li class="file" onclick="showFile('${test.path}')">üìÑ ${test.path}</li>`
                        ).join('') + '</ul>' : ''}
                    </ul>
                </ul>
            `;
            document.getElementById('fileTree').innerHTML = treeHTML;
        }

        // Display Download List
        function displayDownloadList(codeData) {
            let downloadHTML = '';
            
            if (codeData.project_structure?.files) {
                codeData.project_structure.files.forEach(file => {
                    downloadHTML += `
                        <div class="download-item">
                            <div>
                                <strong>üìÑ ${file.path}</strong>
                                <p style="color: var(--text-light); font-size: 0.9em;">${file.description || ''}</p>
                            </div>
                            <button class="btn btn-primary" onclick="downloadFile('${file.path}')">
                                üíæ ÿ™ÿ≠ŸÖŸäŸÑ
                            </button>
                        </div>
                    `;
                });
            }

            downloadHTML += `
                <div class="download-item">
                    <div>
                        <strong>üì¶ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ ŸÉÿßŸÖŸÑ</strong>
                        <p style="color: var(--text-light); font-size: 0.9em;">ŸÖŸÑŸÅ ZIP Ÿäÿ≠ÿ™ŸàŸä ÿπŸÑŸâ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖŸÑŸÅÿßÿ™</p>
                    </div>
                    <button class="btn btn-success" onclick="downloadAllFiles()">
                        üì¶ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÉŸÑ
                    </button>
                </div>
            `;

            document.getElementById('downloadList').innerHTML = downloadHTML;
        }

        // Display Code
        function displayCode(codeData) {
            let codeHTML = '';

            if (codeData.project_structure?.files) {
                codeData.project_structure.files.forEach(file => {
                    codeHTML += `
                        <div class="code-container" id="code-${file.path}">
                            <div class="code-header">
                                <span>üìÑ ${file.path}</span>
                                <button class="btn" style="padding: 5px 15px; background: rgba(255,255,255,0.2);" 
                                        onclick="copyCode('${file.path}')">
                                    üìã ŸÜÿ≥ÿÆ
                                </button>
                            </div>
                            <div class="code-body">
                                <pre>${escapeHtml(file.content)}</pre>
                            </div>
                        </div>
                    `;
                });
            }

            document.getElementById('codeDisplay').innerHTML = codeHTML;
        }

        // Download File
        function downloadFile(filePath) {
            const file = findFileByPath(filePath);
            if (!file) return;

            const blob = new Blob([file.content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filePath.split('/').pop();
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            showAlert('success', `‚úÖ ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ${filePath}`);
        }

        // Download All Files as ZIP
        async function downloadAllFiles() {
            // Simple implementation - create text file with all code
            let allContent = '# Generated Project Files\n\n';
            
            if (generatedCode.project_structure?.files) {
                generatedCode.project_structure.files.forEach(file => {
                    allContent += `\n${'='.repeat(80)}\n`;
                    allContent += `FILE: ${file.path}\n`;
                    allContent += `${'='.repeat(80)}\n\n`;
                    allContent += file.content;
                    allContent += '\n\n';
                });
            }

            const blob = new Blob([allContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'generated-project.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            showAlert('success', '‚úÖ ÿ™ŸÖ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ ŸÉÿßŸÖŸÑ');
        }

        // Copy Code
        function copyCode(filePath) {
            const file = findFileByPath(filePath);
            if (!file) return;

            navigator.clipboard.writeText(file.content).then(() => {
                showAlert('success', '‚úÖ ÿ™ŸÖ ŸÜÿ≥ÿÆ ÿßŸÑŸÉŸàÿØ');
            });
        }

        // Show File
        function showFile(filePath) {
            const element = document.getElementById(`code-${filePath}`);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth' });
            }
        }

        // Find File by Path
        function findFileByPath(path) {
            if (generatedCode.project_structure?.files) {
                const file = generatedCode.project_structure.files.find(f => f.path === path);
                if (file) return file;
            }
            if (generatedCode.tests) {
                return generatedCode.tests.find(f => f.path === path);
            }
            return null;
        }

        // Analyze Code
        async function analyzeCode() {
            const code = document.getElementById('codeToAnalyze').value;
            if (!code) {
                showAlert('error', '‚ö†Ô∏è ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ŸÉŸàÿØ ŸÑŸÑÿ™ÿ≠ŸÑŸäŸÑ');
                return;
            }

            const apiKey = document.getElementById('apiKey').value;
            if (!apiKey) {
                showAlert('error', '‚ö†Ô∏è ÿßŸÑÿ±ÿ¨ÿßÿ° ÿ•ÿØÿÆÿßŸÑ ŸÖŸÅÿ™ÿßÿ≠ API');
                return;
            }

            const prompt = `ŸÇŸÖ ÿ®ÿ™ÿ≠ŸÑŸäŸÑ ÿ¨ŸàÿØÿ© ÿßŸÑŸÉŸàÿØ ÿßŸÑÿ™ÿßŸÑŸä ŸàŸÇÿØŸÖ ÿ™ŸÇÿ±Ÿäÿ± ÿ¥ÿßŸÖŸÑ:

${code}

ŸÇÿØŸÖ ÿßŸÑÿ™ŸÇÿ±Ÿäÿ± ÿ®ÿ™ŸÜÿ≥ŸäŸÇ JSON:
{
  "overall_score": 0-100,
  "issues": [
    {
      "severity": "high/medium/low",
      "type": "ŸÜŸàÿπ ÿßŸÑŸÖÿ¥ŸÉŸÑÿ©",
      "description": "ÿßŸÑŸàÿµŸÅ",
      "line": ÿ±ŸÇŸÖ ÿßŸÑÿ≥ÿ∑ÿ±,
      "suggestion": "ÿßŸÑÿ≠ŸÑ ÿßŸÑŸÖŸÇÿ™ÿ±ÿ≠"
    }
  ],
  "strengths": ["ŸÜŸÇÿßÿ∑ ÿßŸÑŸÇŸàÿ©"],
  "metrics": {
    "complexity": "ŸÖŸÜÿÆŸÅÿ∂/ŸÖÿ™Ÿàÿ≥ÿ∑/ÿπÿßŸÑŸä",
    "maintainability": 0-100,
    "readability": 0-100,
    "documentation": 0-100
  },
  "recommendations": ["ÿßŸÑÿ™ŸàÿµŸäÿßÿ™"]
}`;

            try {
                const response = await callAI(apiKey, prompt);
                const analysis = JSON.parse(response.match(/```json\s*([\s\S]*?)\s*```/)?.[1] || response);
                displayAnalysisResults(analysis);
            } catch (error) {
                showAlert('error', `‚ùå ÿÆÿ∑ÿ£ ŸÅŸä ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ: ${error.message}`);
            }
        }

        // Display Analysis Results
        function displayAnalysisResults(analysis) {
            const html = `
                <div class="card">
                    <h3>üìä ŸÜÿ™ÿßÿ¶ÿ¨ ÿßŸÑÿ™ÿ≠ŸÑŸäŸÑ</h3>
                    <div class="quality-indicators">
                        <div class="indicator">
                            <div class="indicator-value">${analysis.overall_score}</div>
                            <div class="indicator-label">ÿßŸÑÿ™ŸÇŸäŸäŸÖ ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä</div>
                        </div>
                        <div class="indicator">
                            <div class="indicator-value">${analysis.metrics?.complexity || 'N/A'}</div>
                            <div class="indicator-label">ÿßŸÑÿ™ÿπŸÇŸäÿØ</div>
                        </div>
                        <div class="indicator">
                            <div class="indicator-value">${analysis.metrics?.maintainability || 'N/A'}</div>
                            <div class="indicator-label">ŸÇÿßÿ®ŸÑŸäÿ© ÿßŸÑÿµŸäÿßŸÜÿ©</div>
                        </div>
                        <div class="indicator">
                            <div class="indicator-value">${analysis.metrics?.readability || 'N/A'}</div>
                            <div class="indicator-label">ÿ≥ŸáŸàŸÑÿ© ÿßŸÑŸÇÿ±ÿßÿ°ÿ©</div>
                        </div>
                    </div>

                    <h4 style="margin-top: 30px; color: var(--danger);">‚ö†Ô∏è ÿßŸÑŸÖÿ¥ÿßŸÉŸÑ ÿßŸÑŸÖŸÉÿ™ÿ¥ŸÅÿ© (${analysis.issues?.length || 0})</h4>
                    ${analysis.issues?.map(issue => `
                        <div class="alert alert-${issue.severity === 'high' ? 'error' : issue.severity === 'medium' ? 'warning' : 'info'} show">
                            <strong>${issue.type}</strong><br>
                            ${issue.description}<br>
                            <em>ÿßŸÑÿ≠ŸÑ ÿßŸÑŸÖŸÇÿ™ÿ±ÿ≠: ${issue.suggestion}</em>
                        </div>
                    `).join('') || '<p>ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÉÿ™ÿ¥ÿßŸÅ ŸÖÿ¥ÿßŸÉŸÑ</p>'}

                    <h4 style="margin-top: 30px; color: var(--success);
